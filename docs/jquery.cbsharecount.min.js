!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_jquery="undefined"!=typeof window?window.$:"undefined"!=typeof global?global.$:null,_jquery2=_interopRequireDefault(_jquery),ShareCount=function(){function ShareCount(element,i,options){_classCallCheck(this,ShareCount),this.element=element,this.$element=_jquery2["default"](element),this.site_url="",this.api_url="",this.param_name="",this.send_data={},this.num=i,this.options=options,this.defaults={cache:!0,cacheTime:864e5,assign:["fb","hb","tw","pk"]},this.count={fb:0,hb:0,tw:0,pk:0}}return _createClass(ShareCount,[{key:"setParam",value:function(url){var data={},defaultData={fb:{api_url:"https://graph.facebook.com/",param:{id:url}},hb:{api_url:"http://api.b.st-hatena.com/entry.count",param:{url:url}},tw:{api_url:"https://jsoon.digitiminimi.com/twitter/count.json",param:{url:url}},pk:{api_url:"https://query.yahooapis.com/v1/public/yql",param:{q:"SELECT content FROM data.headers WHERE url=\n            'https://widgets.getpocket.com/v1/button?label=pocket&count=vertical&v=1&url="+url+"&src="+url+"'",format:"xml",env:"store://datatables.org/alltableswithkeys"}}};return this.conf.assign.map(function(key){return data[key]=defaultData[key]}),data}},{key:"getCount",value:function(key){var d=new _jquery2["default"].Deferred;return _jquery2["default"].ajax({type:"get",url:this.api_url,cache:!0,dataType:"jsonp",data:this.send_data,success:d.resolve,error:d.reject,context:key}),d.promise()}},{key:"takeCount",value:function(key,arg){var that=this,keyArray=key.split(",");return _jquery2["default"](arg).each(function(i){var self=_jquery2["default"].extend({},this,{key:keyArray[i]}),obj=this[0]?this[0]:this;switch(self.key){case"fb":that.count.fb="share"in obj&&"share_count"in obj.share?obj.share.share_count:0;break;case"hb":that.count.hb=Array.isArray(obj)?obj[0]:obj||0;break;case"tw":that.count.tw=obj.count||0;break;case"pk":if(this[0].results){var content=obj.results.toString(),match=content.match(/&lt;em id="cnt"&gt;(\d+)&lt;\/em&gt;/i);that.count.pk=null!==match?Number(match[1]):0}}}),that.conf.cache&&that.save(),that.render()}},{key:"setup",value:function(){var _this=this,that=this,df=[],data=that.setParam(that.site_url);_jquery2["default"].each(data,function(key,val){_this.api_url=val.api_url,_this.send_data=val.param,df.push(_this.getCount(key))}),_jquery2["default"].when.apply(_jquery2["default"],df).done(function(){return that.takeCount(this.toString(),arguments)})}},{key:"render",value:function(){var fb=_jquery2["default"](".cb-fb").eq(this.num).find("span"),hb=_jquery2["default"](".cb-hb").eq(this.num).find("span"),tw=_jquery2["default"](".cb-tw").eq(this.num).find("span"),pk=_jquery2["default"](".cb-pk").eq(this.num).find("span");-1!==this.conf.assign.indexOf("fb")&&fb.html(this.count.fb),-1!==this.conf.assign.indexOf("hb")&&hb.html(this.count.hb),-1!==this.conf.assign.indexOf("tw")&&tw.html(this.count.tw),-1!==this.conf.assign.indexOf("pk")&&pk.html(this.count.pk)}},{key:"save",value:function(){var cache=JSON.parse(localStorage.getItem("sc_"+this.site_url))||{},count={},margedCount={};-1!==this.conf.assign.indexOf("fb")&&(count.fb=this.count.fb),-1!==this.conf.assign.indexOf("hb")&&(count.hb=this.count.hb),-1!==this.conf.assign.indexOf("tw")&&(count.tw=this.count.tw),-1!==this.conf.assign.indexOf("pk")&&(count.pk=this.count.pk),count.saveTime=(new Date).getTime(),margedCount=_jquery2["default"].extend({},cache,count),localStorage.setItem("sc_"+this.site_url,JSON.stringify(margedCount)),localStorage.setItem("cbsharecount",(new Date).getTime())}},{key:"checkCache",value:function(){var _this2=this,cache=void 0,nocache=void 0,currentTime=void 0;if("localStorage"in window&&null!==window.localStorage){if(cache=JSON.parse(localStorage.getItem("sc_"+this.site_url))||null,currentTime=(new Date).getTime(),cache&&(nocache=this.conf.assign.filter(function(key){return void 0===cache[key]}),nocache.length>0))return this.setup();if(cache&&currentTime-cache.saveTime<this.conf.cacheTime)return this.conf.assign.map(function(key){return _this2.count[key]="number"==typeof cache[key]?cache[key]:""}),this.render()}return this.setup()}},{key:"init",value:function(){return this.site_url=this.$element.attr("title"),this.conf=_jquery2["default"].extend({},this.defaults,this.options),this.conf.cache?this.checkCache():this.setup(),this}}]),ShareCount}();exports["default"]=ShareCount}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(require,module){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_jquery="undefined"!=typeof window?window.$:"undefined"!=typeof global?global.$:null,_jquery2=_interopRequireDefault(_jquery),_ShareCount=require("ShareCount"),_ShareCount2=_interopRequireDefault(_ShareCount);!function(factory){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=factory("undefined"!=typeof window?window.$:"undefined"!=typeof global?global.$:null,require("ShareCount"),window):factory(_jquery2["default"],window)}(function($,window){$.fn.cbShareCount=function(options){var lastSaveTime=void 0,storage=window.localStorage||null,cacheTime=options.cacheTime||864e5,currentTime=(new Date).getTime();return"localStorage"in window&&null!==storage&&(lastSaveTime=JSON.parse(localStorage.getItem("cbsharecount"))||null,lastSaveTime&&currentTime-lastSaveTime>cacheTime&&Object.keys(storage).map(function(key){return~key.indexOf("sc_http")&&delete storage[key],storage})),this.each(function(i){new _ShareCount2["default"](this,i,options).init()})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ShareCount:1}]},{},[2]);
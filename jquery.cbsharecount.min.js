/*!
 * jquery.cbsharecount.js v1.0.1
 * Auther @maechabin
 * Licensed under mit license
 * https://github.com/maechabin/jquery.cb-share-count.js
 */
!function(a){"object"==typeof module&&"object"==typeof module.exports?a(require("jquery"),window,document):a(jQuery,window,document)}(function(a){"use strict";var b=function(b,c){this.element=b,this.$element=a(b),this.site_url="",this.api_url="",this.param_name="",this.send_data={},this.num=c};b.prototype.data={twitter:{api_url:"http://urls.api.twitter.com/1/urls/count.json",param_name:"url",count:0},facebook:{api_url:"http://graph.facebook.com/",param_name:"id",count:0},hatena:{api_url:"http://api.b.st-hatena.com/entry.count",param_name:"url",count:0}},b.prototype.get_count=function(){var b=new a.Deferred;return a.ajax({type:"get",url:this.api_url,cache:!0,dataType:"jsonp",data:this.send_data,success:b.resolve,error:b.reject}),b.promise()},b.prototype.view=function(b){var c=this,d=a(".cb-tw").eq(c.num).find("span"),e=a(".cb-fb").eq(c.num).find("span"),f=a(".cb-hb").eq(c.num).find("span");a(b).each(function(a){switch(a){case 0:c.data.twitter.count=this[0].count;break;case 1:c.data.facebook.count=this[0].shares||this[0].likes||0;break;case 2:c.data.hatena.count=this[0]}}),d.html(c.data.twitter.count),e.html(c.data.facebook.count),f.html(c.data.hatena.count)},b.prototype.setup=function(){var b=this,c=[];a.each(b.data,function(a,d){b.api_url=d.api_url,b.send_data[d.param_name]=b.site_url,c.push(b.get_count())}),a.when.apply(a,c).done(function(){b.view(arguments)})},b.prototype.init=function(){return this.site_url=this.$element.attr("title"),this.setup(),this},a.fn.cbShareCount=function(){return this.each(function(a){new b(this,a).init()})}});